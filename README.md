# Проектная работа "Веб-ларек"

Ссылка на проект: https://github.com/Viktor-Bolotin/web-larek-frontend.git

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с TS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/scss/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Классы и компоненты

## Модель
__Класс ProductApi__ - отвечает за взаимодействие с API
Атрибуты:
  cdn - устанавливает базовый URL для работы с АПИ

Методы:
  getProductList() - получает список товаров
  sentOrder() - отправляет сформированный заказ на сервер

__Класс Products__ - обрабатывает присутствующие в магазине товары
Атрибуты:
  productsList - хранит список товаров

Методы:
  getProducts() - получает список товаров с АПИ и сохраняет их в productList
  setSelectProducts() - используется при загрузке товаров с сервера, устанавливает всем товарам состояние, при котором они не выбраны покупателем
  getProduct() - возвращает товар в соответствии с заданным id
  toggleSelectProduct() - изменяет состояние товара, если его положили в корзину или удалили из неё


__Класс Order__ - работает с формированием заказа для отправки на сервер
Атрибуты:
  orderInformation - хранит информацию о заказе

Методы:
  setOrderData() - формирует параметры заказа в соответствии с полученными данными
  getOrderData() - возвращает существующие на данный момент параметры заказа

__Класс Basket__ - обрабатывает добавленные к заказу товары
Атрибуты:
  basketItemList - хранит товары, добавленные в корзину
  broker - устанавливает экземпляр брокера событий, которым инициируются события в классе

Методы:
  addBasketItem() - добавляет товар к списку заказанных
  removeBasketItem() - удаляет товар из списка заказанных
  calculateBasketSum() - определяет сумму товаров, добавленных в корзину
  getOrderData() - передаёт массив данных для формирования корзины

## Отображение
__класс GalleryItemView__ - экземпляры класса формируют карточки товара для отображения в галерее

__Класс Page__ - отвечает за отображение главной страницы проекта
Атрибуты:
  container - устанавливает элемент контейнера страницы
  wrapper - устанаваливает элемент обёртки страницы
  buttonOpenBasket - устанавливает кнопку открытия модального окна корзины
  gallery - устанавливает контейнер для галереи
  galleryElements - массив созданных карточек товаров для галереи товаров
  basketCounter - устанавливает элемент счётчика товаров в корзине

Методы:
  lockedPage() - блокирует прокрутку страницы при открытом модальном окне и разблокирует, если модальное окно закрыто
  renderGallery() - вставляет массив карточек товаров в вёрстку галереи
  setBasketCounter() - изменяет значение счётчика добавленных в корзину товаров

__Класс MainModal__ - формирует модальное окно, в которое затем будет добавлен контент
Атрибуты:
  modalContent - устанавливает контейнер для контента модального окна
  content - устанавливает текущий контент модального окна
  broker - устанавливает экземпляр брокера событий

Методы:
  openModal() - открывает модальное окно и блокирует прокрукту страницы
  closeModal() - закрывает модальное окно
  render() - вставляет в вёрстку принятый контент

__Класс ModalCardContent__ - формирует содержимое модального окна просмотра карточки
Атрибуты:
  modalButton - устанавливает элемент кнопки основного действия модального окна
  modalSettings - устанавливает параметры товара, открытого в данный момент в модальном окне
  title - устанавливает название товара
  description - устанавливает описание товара
  price - устанавливает цену товара
  selected - устанавливает состояние, при котором товар добавлен или не добавлен в корзину
  category - устанавливает категорию товара
  image - устанавливает ссылку на изображение товара

Методы:
  render() - настраивает и возвращает элемент с контентом модального окна в зависимости от присланного товара

__Класс BasketItemView__ - экземпляры класса формируют карточки товара для корзины

__Класс ModalBasketContent__ - формирует содержимое модального окна корзины
Атрибуты: 
  modalList - устанавливает элемент, в который будут вставляться карточки товаров в корзине
  basketElementList: HTMLElement[] - массив переданных карточек товаров корзины
  modalbutton - устанавливает кнопку основного действия в контенте модального окна

Методы:
  render() - настраивает и возвращает элемент с контентом модального окна

__Класс ModalOrderСontent__ - формирует содержимое модального окна для выбора способа оплаты и введения адреса
Атрибуты:
  modalButton - устанавливает кнопку основного действия модального окна
  paymentButtons - устанавливает массив кнопок выбора способа оплаты
  addressInput - устанавливает поле введения адреса
  payment - устанавливает выбранный способ оплаты

Методы:
  isValidModal() - проверяет, заполнено ли поле адреса и выбран ли способ оплаты. Если нет, блокирует кнопку продолжения

__Класс ModalContactsContent__ - формирует содержимое модального окна для введения контактных данных
Атрибуты:
  modalInputs - устанавливает массив элементов полей ввода модального окна
  emailInput - устанавливает элемент поля ввода email
  phoneInput - устанавливает элемент поля ввода телефона
  modalButton - устанавливает кнопку основного действия модального окна

Методы:
  isValidModal() - проверяет, заполнены ли оба поля ввода. Если нет, блокирует кнопку оформления заказа

__Класс ModalSuccessContent__ - 
Атрибуты:
  modalButton - устанавливает кнопку основного действия модального окна

Методы:
render() - настраивает и возвращает элемент с контентом модального окна

## Брокер событий
Модель данных с отображениям связана через брокер событий
Брокер имеет следующие события:

ClickCard ('product:open') - запускается, когда нажата одна из карточек товаров. Настраивает и открывает модальное окно карточки
OpenModal ('modal:open') - запускается, когда открыто модальное окно, блокирует страницу
CloseModal ('modal:close') - запускается, когда закрывается модальное окно, снимает блокировку страницы
AddBasket ('modal:addBasket') - запускается, когда нажата кнопка добавления товара в корзину. Изменяет состояния выбранности товара и добавляет товар в модель корзины
OpenModalBasket ('basket:open') - запускается, когда нажата кнопка открытия корзины, запускает настройку и отобржаение модального окна корзины
DeleteBasketItem ('basket:delete') - запускается, когда нажата кнопка удаления товара из корзины. Удаляет товар из модели корзины
ContinueModalBasket ('basket:continue') - запускается при нажатии на кнопку "Оформить" в модальном окне корзины. Запускает отображение модального окна заказа, открывает его, закрывает модальное окно корзины и передаёт данные из модели корзины в модель заказа
ChoosePeymentAndAddress ('order:payment') - запускается при нажатии на кнопку "Далее" в модальном окне способа оплаты и адреса. Открывает модальное окно контактных данных, закрывает модальное окно оплаты и адреса и передаёт введённые данные в модель заказа
PlaceAnOrder ('order:place') - запускается при нажатии кнопки "Оплатить" в модальном окне контактных данных. Передаёт введённые пользователем данные в модель заказа, отправляет АПИ-запрос со сформированным заказом на сервер, после чего запускает модальное окно успешного оформления с пришедшими ответными данными
UpdateBasket ('basket:update') - запускается, когда в модели корзины происходят изменения - добавляется или удаляется товар. Запускает перерисовку списка товаров в корзине, изменение суммы корзину и изменение значения счётчика добавленных товаров на главной странице



## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```
