# Проектная работа "Веб-ларек"

Ссылка на проект: https://github.com/Viktor-Bolotin/web-larek-frontend.git

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с TS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/scss/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Классы и компоненты

## Модель
__Класс ProductApi__ - отвечает за взаимодействие с API
Атрибуты:
cdn - устанавливает базовый URL для работы с АПИ

Методы:
getProductList() - получает список товаров
sentOrder() - отправляет сформированный заказ на сервер

__Класс Products__ - обрабатывает присутствующие в магазине товары
Атрибуты:
productsList - хранит список товаров

Методы:
getProducts() - получает список товаров с АПИ и сохраняет их в productList
setSelectProducts() - используется при загрузке товаров с сервера, устанавливает всем товарам состояние, при котором они не выбраны покупателем
getProduct() - возвращает товар в соответствии с заданным id
toggleSelectProduct() - изменяет состояние товара, если его положили в корзину или удалили из неё


__Класс Order__ - работает с формированием заказа для отправки на сервер
Атрибуты:
orderInformation - хранит информацию о заказе

Методы:
setOrderData() - формирует параметры заказа в соответствии с полученными данными
getOrderData() - возвращает существующие на данный момент параметры заказа

__Класс Basket__ - обрабатывает добавленные к заказу товары
Атрибуты:
basketItemList - хранит товары, добавленные в корзину
broker - устанавливает экземпляр брокера событий, которым инициируются события в классе

Методы:
addBasketItem() - добавляет товар к списку заказанных
removeBasketItem() - удаляет товар из списка заказанных
calculateBasketSum() - определяет сумму товаров, добавленных в корзину
getOrderData() - передаёт массив данных для формирования корзины

## Отображение
__класс GalleryItemView__ - создаёт карточку товара для галереи
Атрибуты:
card - карточка товара галереи, созданная конструктором

__Класс Page__ - отвечает за отображение главной страницы проекта
Атрибуты:
container - устанавливает элемент контейнера страницы
wrapper - устанаваливает элемент обёртки страницы
buttonOpenBasket - устанавливает кнопку открытия модального окна корзины
gallery - устанавливает контейнер для галереи
galleryElements - массив созданных карточек товаров для галереи товаров
basketCounter - устанавливает элемент счётчика товаров в корзине

lockedPage() - блокирует прокрутку страницы при открытом модальном окне и разблокирует, если модальное окно закрыто
renderGallery() - вставляет массив карточек товаров в вёрстку галереи
setBasketCounter() - изменяет значение счётчика добавленных в корзину товаров

__Абстрактный класс Modal__ наследует класс Component и формирует базовые функции для всех модальных окон:
Атрибуты:
modal - устанавливает обращение к данному модальному окну
modalContent - устанавливает обращение к контенту модального окна
broker - устанавливает экземпляр брокера событий, которым инициируются события в классе
modalButton - устанавливает обращение к кнопке основного действия модального окна

openModal() - открывает модальное окно
closeModal() - закрывает модальное окно

__Класс ModalCard__ формирует модальное окно просмотра карточки
Атрибуты:
modalTitle - устанавливает элемент с заголовком модального окна
modalDescription - устанавливает элемент с описанием товара в модальном окне
modalPrice - устанавливает элемент с ценой товара
modalCategory - устанавливает элемент с категорией товара
modalImage - устанавливает элемент с изображением товара
modalSettings? - устанавливает параметры товара, открытого в данный момент в модальном окне

setModal() - настраивает содержимое модального окна в зависимости от того, на какую карточку нажал пользователь по полученным настройкам

__Класс BasketItemView__ - формирует карточку товара для корзины
Атрибуты: 
basketCard - карточка товара корзины, созданная конструктором

__Класс ModalBasket__ - отвечает за отображение модального окна корзины
Атрибуты: 
modalList - устанавливает элемент, в который будут вставляться карточки товаров в корзине
basketElementList: HTMLElement[] - массив переданных карточек товаров корзины

Методы:
setBasket() - Вставляет в вёрстку массив карточек товаров и их сумму

__Класс ModalOrder__ - отвечает за отображение модального окна с выбором способа оплаты и полем ввода для адреса
Атрибуты:
paymentButtons - устанавливает элементы кнопок выбора оплаты
addressInput - устанавливает поле ввода адреса
payment - определяет выбранный способ оплаты

Методы:
isValidModal() - проверяет, заполнено ли поле адреса и выбран ли способ оплаты. Если нет, блокирует кнопку продолжения

__Класс ModalContacts__ - отвечает за отображение модального окна с полями для ввода контактных данных
Атрибуты:
modalInputs - устанавливает элементы полей ввода модального окна
emailInput - устанавливает элемент поля ввода email
phoneInput - устанавливает элемент поля ввода телефона

Методы:
isValidModal() - проверяет, заполнены ли оба поля ввода. Если нет, блокирует кнопку оформления заказа

## Брокер событий
Модель данных с отображениям связана через брокер событий
Брокер имеет следующие события:

ClickCard ('product:open') - запускается, когда нажата одна из карточек товаров. Настраивает и открывает модальное окно карточки
OpenModal ('modal:open') - запускается, когда открыто модальное окно, блокирует страницу
CloseModal ('modal:close') - запускается, когда закрывается модальное окно, снимает блокировку страницы
ModalAddBasket ('modal:addBasket') - запускается, когда нажата кнопка добавления товара в корзину. Изменяет состояния выбранности товара и добавляет товар в модель корзины
OpenModalBasket ('basket:open') - запускается, когда нажата кнопка открытия корзины, запускает настройку и отобржаение модального окна корзины
DeleteBasketItem ('basket:delete') - запускается, когда нажата кнопка удаления товара из корзины. Удаляет товар из модели корзины
ContinueModalBasket ('basket:continue') - запускается при нажатии на кнопку "Оформить" в модальном окне корзины. Запускает отображение модального окна заказа, открывает его, закрывает модальное окно корзины и передаёт данные из модели корзины в модель заказа
ChoosePeymentAndAddress ('order:payment') - запускается при нажатии на кнопку "Далее" в модальном окне способа оплаты и адреса. Открывает модальное окно контактных данных, закрывает модальное окно оплаты и адреса и передаёт введённые данные в модель заказа
PlaceAnOrder ('order:place') - запускается при нажатии кнопки "Оплатить" в модальном окне контактных данных. Передаёт введённые пользователем данные в модель заказа, отправляет АПИ-запрос со сформированным заказом на сервер, после чего запускает модальное окно успешного оформления с пришедшими ответными данными
UpdateBasket ('basket:update') - запускается, когда в модели корзины происходят изменения - добавляется или удаляется товар. Запускает перерисовку списка товаров в корзине, изменение суммы корзину и изменение значения счётчика добавленных товаров на главной странице



## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```
