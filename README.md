# Проектная работа "Веб-ларек"

Ссылка на проект: https://github.com/Viktor-Bolotin/web-larek-frontend.git

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с TS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/scss/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Классы и компоненты

## Модель
__Класс ProductApi__ - отвечает за взаимодействие с API
Атрибуты:
cdn - устанавливает базовый URL для работы с АПИ

Методы:
getProductList() - получает список товаров
sentOrder() - отправляет сформированный заказ на сервер

__Класс Products__ - обрабатывает присутствующие в магазине товары
Атрибуты:
productsList - хранит настроенный список товаров
api - устанавливает экземпляр класса АПИ, с которого получаются товары
broker - устанавливает экземпляр брокера событий, которым инициируются события в классе
cardElementList - хранит разметку карточек товаров

Методы:
getProducts() - получает список товаров с АПИ и сохраняет их в productList
setProducts() - настраивает дополнительные поля в объектах товаров для дальнейшей работы с ними
getProduct() - возвращает товар в соответствии с заданным id
toggleSelectProduct() - изменяет состояние товара, если его положили в корзину или удалили из неё
setCards() - создаёт разметку карточек товаров для галереи

__Класс Order__ - работает с формированием заказа для отправки на сервер
Атрибуты:
broker - устанавливает экземпляр брокера событий, которым инициируются события в классе
orderInf - хранит информацию о заказе

Методы:
setOrderData() - формирует параметры заказа в соответствии с полученными данными
getOrderData() - возвращает существующие на данный момент параметры заказа

__Класс Basket__ - обрабатывает добавленные к заказу товары
Атрибуты:
basketList - хранит товары, добавленные в корзину
basketSum - хранит текущую сумму товаров
broker - устанавливает экземпляр брокера событий, которым инициируются события в классе
backetElementList - хранит созданные карточки товаров

Методы:
addBasketItem() - добавляет товар к списку заказанных
addBasketElement() - создаёт и сохраняет карточку товара, добавленного в корзину 
removeBasketItem() - удаляет товар из списка заказанных
removeBasdketElement() - удаляет карточку товара, удалённого из корзины
calculateBasketSum() - определяет сумму товаров, добавленных в корзину
setBasketSize() - инициирует событие и передаёт обновлённый размер корзины
getOrderData() - передаёт массив данных для формирования корзины

## Отображение
__Абстрактный класс Modal__ формирует базовые функции для всех модальных окон:
Атрибуты:
modal - устанавливает обращение к данному модальному окну
modalContent - устанавливает обращение к контенту модального окна
broker - устанавливает экземпляр брокера событий, которым инициируются события в классе
modalButton - устанавливает обращение к кнопке основного действия модального окна

openModal() - открывает модальное окно
closeModal() - закрывает модальное окно

__Класс ModalCard__ формирует модальное окно просмотра карточки
Атрибуты:
modalTitle - устанавливает элемент с заголовком модального окна
modalDescription - устанавливает элемент с описанием товара в модальном окне
modalPrice - устанавливает элемент с ценой товара
modalCategory - устанавливает элемент с категорией товара
modalImage - устанавливает элемент с изображением товара
modalSettings? - устанавливает текущие настройки модального окна

setModal() - настраивает содержимое модального окна в зависимости от того, на какую карточку нажал пользователь по полученным настройкам

__Класс ModalBasket__ - отвечает за отображение модального окна корзины
Атрибуты: 
modalList - устанавливает элемент, в который будут вставляться карточки товаров в корзине

Методы:
renderBasket() - Вставляет в вёрстку полученные карточки товаров и сумму товаров

__Класс ModalOrder__ - отвечает за отображение модального окна с выбором способа оплаты и полем ввода для адреса
Атрибуты:
paymentButtons - устанавливает элементы кнопок выбора оплаты
addressInput - устанавливает поле ввода адреса
payment - определяет выбранный способ оплаты

Методы:
isValidModal() - проверяет, заполнено ли поле адреса и выбран ли способ оплаты. Если нет, блокирует кнопку продолжения

__Класс ModalContacts__ - отвечает за отображение модального окна с полями для ввода контактных данных
Атрибуты:
modalInputs - устанавливает элементы полей ввода модального окна
emailInput - устанавливает элемент поля ввода email
phoneInput - устанавливает элемент поля ввода телефона

Методы:
isValidModal() - проверяет, заполнены ли оба поля ввода. Если нет, блокирует кнопку оформления заказа

__Класс Page__ - отвечает за отображение главной страницы проекта
Атрибуты:
container - устанавливает элемент контейнера страницы
wrapper - устанаваливает элемент обёртки страницы
buttonOpenBasket - устанавливает кнопку открытия модального окна корзины
gallery - устанавливает контейнер для галереи
basketCounter - устанавливает элемент счётчика товаров в корзине

lockedPage() - блокирует прокрутку страницы при открытом модальном окне и разблокирует, если модальное окно закрыто
renderGallery() - отображает галерею товаров
setBasketCounter() - изменяет значение счётчика добавленных в корзину товаров

## Брокер событий
Модель данных с отображениям связана через брокер событий
Брокер имеет следующие события:

GetProductList ('product:get') - запускается, когда получены и обработаны все продукты. Запускает отображение галереи
ClickCard ('product:open') - запускается, когда нажата одна из карточек товаров. Настраивает и открывает модальное окно карточки
OpenModal ('modal:open') - запускается, когда открыто модальное окно, блокирует страницу
CloseModal ('modal:close') - запускается, когда закрывается модальное окно, снимает блокировку страницы
ModalAddBasket ('modal:addBasket') - запускается, когда нажата кнопка добавления товара в корзину. Изменяет состояния выбранности товара и добавляет товар в корзину
OpenModalBasket ('basket:open') - запускается, когда нажата кнопка открытия корзины, запускает настройку и отобржаение модального окна корзины
DeleteBasketItem ('basket:delete') - запускается, когда нажата кнопка удаления товара из корзины. Удаляет товар из корзины, из списка элементов и запускает перерисовку корзины
ChangeBasketItem ('basket:change') - запускается, когда в корзину добавляется или удаляется товар. Запускает перерисовку счётчика корзины на главной страницк
ContinueModalBasket ('basket:continue') - запускается при нажатии на кнопку "Оформить" в модальном окне корзины. Запускает отображение модального окна заказа, открывает его, закрывает модальное окно корзины и передаёт данные из модели корзины в модель заказа
ChoosePeymentAndAddress ('order:payment') - запускается при нажатии на кнопку "Далее" в модальном окне способа оплаты и адреса. Открывает модальное окно контактных данных, закрывает модальное окно оплаты и адреса и передаёт введённые данные в модель заказа
PlaceAnOrder ('order:place') - запускается при нажатии кнопки "Оплатить" в модальном окне контактных данных. Передаёт введённые пользователем данные в модель заказа, отправляет АПИ-запрос со сформированным заказом на сервер, после чего запускает модальное окно успешного оформления с пришедшими ответными данными

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```
